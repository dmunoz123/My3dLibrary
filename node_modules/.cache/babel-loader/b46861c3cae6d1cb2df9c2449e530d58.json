{"ast":null,"code":"var _jsxFileName = \"/home/munoz/Desktop/Spring2024/cmsi3710/final/our-own-3d-library-daniel_munoz/src/Sandbox.js\",\n  _s = $RefreshSig$();\n/**\n * Build out this component to display a “sandbox” scene—see the description below.\n */\nimport { useEffect, useRef } from 'react';\nimport { getGL, initVertexBuffer, initSimpleShaderProgram } from './glsl-utils';\nimport createXYGridVertices from './Geometries/XY-Grid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VERTEX_SHADER = `\n  #ifdef GL_ES\n  precision highp float;\n  #endif\n\n  attribute vec3 vertexPosition;\n\n  void main(void) {\n    gl_Position = vec4(vertexPosition, 1.0);\n  }\n`;\nconst FRAGMENT_SHADER = `\n  #ifdef GL_ES\n  precision highp float;\n  #endif\n\n  uniform vec3 color;\n\n  void main(void) {\n    gl_FragColor = vec4(color, 1.0)\n  }\n`;\nconst CANVAS_WIDTH = 512;\nconst CANVAS_HEIGHT = 512;\nconst FRAMES_PER_SECOND = 30;\nconst MILLISECONDS_PER_FRAME = 1000 / FRAMES_PER_SECOND;\nconst Sandbox = props => {\n  _s();\n  const canvasRef = useRef();\n  const timestampRef = useRef();\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) {\n      return;\n    }\n    const gl = getGL(canvas);\n    if (!gl) {\n      alert('Sorry, Your browser does not support WebGL');\n    }\n    gl.enable(gl.DEPTH_TEST);\n    gl.clearColor(0.0, 0.0, 0.0, 0.0);\n    gl.viewport(0, 0, canvas.width, canvas.height);\n\n    // Shader initialization\n    let abort = false;\n    const simpleShaderProgram = initSimpleShaderProgram(gl, VERTEX_SHADER, FRAGMENT_SHADER, shader => {\n      abort = true;\n      alert('Shader loading error' + gl.getShaderInfoLog(shader));\n    }, simpleShaderProgram => {\n      abort = true;\n      alert('Sa');\n    });\n\n    // Object and scene initialization\n    // TODO: Define your 3D objects here\n    // This might involve creating vertex buffers, index buffers, and setting up vertex attributes\n\n    const objectsToDraw = [{\n      color: {\n        r: 0.7,\n        g: 0.7,\n        b: 0.7\n      },\n      // Assuming a grey color for the grid lines\n      vertices: createXYGridVertices(),\n      // Directly using the vertices from the grid generation function\n      mode: gl.LINES\n    }];\n\n    // Load buffers with vertex data\n    objectsToDraw.forEach(objectToDraw => {\n      objectToDraw.verticesBuffer = initVertexBuffer(gl, objectToDraw.vertices);\n      if (!objectToDraw.colors) {\n        // If we have a single color, we expand that into an array\n        // of the same color over and over.\n        objectToDraw.colors = [];\n        for (let i = 0, maxi = objectToDraw.vertices.length / 3; i < maxi; i += 1) {\n          objectToDraw.colors = objectToDraw.colors.concat(objectToDraw.color.r, objectToDraw.color.g, objectToDraw.color.b);\n        }\n      }\n      objectToDraw.colorsBuffer = initVertexBuffer(gl, objectToDraw.colors);\n    });\n\n    // drawing obj by vertices\n    const drawByVertices = object => {\n      gl.bindBuffer(gl.ARRAY_BUFFER, object.verticesBuffer);\n      gl.vertexAttribPointer(vertexPositonAttribute, 3, gl.FLOAT, false, 0, 0);\n      gl.drawArrays(object.mode, 0, object.vertices.length / 3);\n    };\n    const drawScene = () => {\n      // Clear the display.\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n      // TODO: Render your objects here. This could involve binding buffers, setting shader uniforms, and making draw calls.\n\n      // Example: gl.drawArrays or gl.drawElements calls for rendering.\n\n      // Display obj (forEach)\n\n      gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n      // All done.\n      // might not be needed\n      // gl.flush()\n    };\n\n    let previousTimestamp;\n    const nextFrame = timestamp => {\n      // Initialize the timestamp.\n      if (!previousTimestamp) {\n        previousTimestamp = timestamp;\n        window.requestAnimationFrame(nextFrame);\n        return;\n      }\n\n      // Check if it’s time to advance.\n      const progress = timestamp - previousTimestamp;\n      if (progress < MILLISECONDS_PER_FRAME) {\n        // Do nothing if it’s too soon.\n        window.requestAnimationFrame(nextFrame);\n        return;\n      }\n\n      // Update objects' positions, animations, etc., here based on elapsed time\n\n      drawScene();\n      if (timestampRef.current) {\n        timestampRef.current.innerText = `Timestamp: ${timestamp.toFixed(2)}`;\n      }\n\n      // Request the next frame.\n      previousTimestamp = timestamp;\n      window.requestAnimationFrame(nextFrame);\n    };\n    drawScene();\n    window.requestAnimationFrame(nextFrame);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"The sandbox scene is where you can demonstrate features/capabilities of your library solely for the purpose of demonstrating them. It doesn\\u2019t have to fit any particular pitch or application.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n        width: CANVAS_WIDTH,\n        height: CANVAS_HEIGHT,\n        ref: canvasRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: timestampRef,\n        style: {\n          position: 'absolute',\n          top: '7px',\n          left: '10px',\n          color: 'black'\n        },\n        children: \"Timestamp: 0.00\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 171,\n    columnNumber: 5\n  }, this);\n};\n_s(Sandbox, \"R0tpnDtzRr4QLNeC7f9WYTtRP00=\");\n_c = Sandbox;\nexport default Sandbox;\nvar _c;\n$RefreshReg$(_c, \"Sandbox\");","map":{"version":3,"names":["useEffect","useRef","getGL","initVertexBuffer","initSimpleShaderProgram","createXYGridVertices","VERTEX_SHADER","FRAGMENT_SHADER","CANVAS_WIDTH","CANVAS_HEIGHT","FRAMES_PER_SECOND","MILLISECONDS_PER_FRAME","Sandbox","props","canvasRef","timestampRef","canvas","current","gl","alert","enable","DEPTH_TEST","clearColor","viewport","width","height","abort","simpleShaderProgram","shader","getShaderInfoLog","objectsToDraw","color","r","g","b","vertices","mode","LINES","forEach","objectToDraw","verticesBuffer","colors","i","maxi","length","concat","colorsBuffer","drawByVertices","object","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","vertexPositonAttribute","FLOAT","drawArrays","drawScene","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","previousTimestamp","nextFrame","timestamp","window","requestAnimationFrame","progress","innerText","toFixed","position","top","left"],"sources":["/home/munoz/Desktop/Spring2024/cmsi3710/final/our-own-3d-library-daniel_munoz/src/Sandbox.js"],"sourcesContent":["/**\n * Build out this component to display a “sandbox” scene—see the description below.\n */\nimport { useEffect, useRef } from 'react'\nimport { getGL, initVertexBuffer, initSimpleShaderProgram } from './glsl-utils'\nimport createXYGridVertices from './Geometries/XY-Grid'\n\nconst VERTEX_SHADER = `\n  #ifdef GL_ES\n  precision highp float;\n  #endif\n\n  attribute vec3 vertexPosition;\n\n  void main(void) {\n    gl_Position = vec4(vertexPosition, 1.0);\n  }\n`\n\nconst FRAGMENT_SHADER = `\n  #ifdef GL_ES\n  precision highp float;\n  #endif\n\n  uniform vec3 color;\n\n  void main(void) {\n    gl_FragColor = vec4(color, 1.0)\n  }\n`\n\nconst CANVAS_WIDTH = 512\nconst CANVAS_HEIGHT = 512\n\nconst FRAMES_PER_SECOND = 30\nconst MILLISECONDS_PER_FRAME = 1000 / FRAMES_PER_SECOND\n\nconst Sandbox = props => {\n  const canvasRef = useRef()\n  const timestampRef = useRef()\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    if (!canvas) {\n      return\n    }\n\n    const gl = getGL(canvas)\n\n    if (!gl) {\n      alert('Sorry, Your browser does not support WebGL')\n    }\n\n    gl.enable(gl.DEPTH_TEST)\n    gl.clearColor(0.0, 0.0, 0.0, 0.0)\n    gl.viewport(0, 0, canvas.width, canvas.height)\n\n    // Shader initialization\n    let abort = false\n    const simpleShaderProgram = initSimpleShaderProgram(\n      gl,\n      VERTEX_SHADER,\n      FRAGMENT_SHADER,\n\n      shader => {\n        abort = true\n        alert('Shader loading error' + gl.getShaderInfoLog(shader))\n      },\n\n      simpleShaderProgram => {\n        abort = true\n        alert('Sa')\n      }\n\n\n    )\n\n    // Object and scene initialization\n    // TODO: Define your 3D objects here\n    // This might involve creating vertex buffers, index buffers, and setting up vertex attributes\n\n    const objectsToDraw = [\n      {\n        color: { r: 0.7, g: 0.7, b: 0.7 }, // Assuming a grey color for the grid lines\n        vertices: createXYGridVertices(), // Directly using the vertices from the grid generation function\n        mode: gl.LINES\n      }\n    ]\n\n    // Load buffers with vertex data\n    objectsToDraw.forEach(objectToDraw => {\n      objectToDraw.verticesBuffer = initVertexBuffer(gl, objectToDraw.vertices)\n\n      if (!objectToDraw.colors) {\n        // If we have a single color, we expand that into an array\n        // of the same color over and over.\n        objectToDraw.colors = []\n        for (let i = 0, maxi = objectToDraw.vertices.length / 3; i < maxi; i += 1) {\n          objectToDraw.colors = objectToDraw.colors.concat(\n            objectToDraw.color.r,\n            objectToDraw.color.g,\n            objectToDraw.color.b\n          )\n        }\n      }\n\n      objectToDraw.colorsBuffer = initVertexBuffer(gl, objectToDraw.colors)\n    })\n\n    // drawing obj by vertices\n    const drawByVertices = object => {\n      gl.bindBuffer(gl.ARRAY_BUFFER, object.verticesBuffer)\n      gl.vertexAttribPointer(vertexPositonAttribute, 3, gl.FLOAT, false, 0, 0)\n\n      gl.drawArrays(object.mode, 0, object.vertices.length / 3)\n    }\n\n    const drawScene = () => {\n      // Clear the display.\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT)\n\n      // TODO: Render your objects here. This could involve binding buffers, setting shader uniforms, and making draw calls.\n\n      // Example: gl.drawArrays or gl.drawElements calls for rendering.\n\n      // Display obj (forEach)\n\n      gl.bindBuffer(gl.ARRAY_BUFFER, null)\n\n      // All done.\n      // might not be needed\n      // gl.flush()\n    }\n\n    let previousTimestamp\n    const nextFrame = timestamp => {\n      // Initialize the timestamp.\n      if (!previousTimestamp) {\n        previousTimestamp = timestamp\n        window.requestAnimationFrame(nextFrame)\n        return\n      }\n\n      // Check if it’s time to advance.\n      const progress = timestamp - previousTimestamp\n      if (progress < MILLISECONDS_PER_FRAME) {\n        // Do nothing if it’s too soon.\n        window.requestAnimationFrame(nextFrame)\n        return\n      }\n\n      // Update objects' positions, animations, etc., here based on elapsed time\n\n      drawScene()\n\n      if (timestampRef.current) {\n        timestampRef.current.innerText = `Timestamp: ${timestamp.toFixed(2)}`\n      }\n\n      // Request the next frame.\n      previousTimestamp = timestamp\n      window.requestAnimationFrame(nextFrame)\n    }\n\n    drawScene()\n\n    window.requestAnimationFrame(nextFrame)\n  }, [])\n\n  return (\n    <article>\n      <p>\n        The sandbox scene is where you can demonstrate features/capabilities of your library solely for the purpose of\n        demonstrating them. It doesn’t have to fit any particular pitch or application.\n      </p>\n\n      <div style={{ position: 'relative' }}>\n        <canvas width={CANVAS_WIDTH} height={CANVAS_HEIGHT} ref={canvasRef} />\n        <div ref={timestampRef} style={{ position: 'absolute', top: '7px', left: '10px', color: 'black' }}>\n          Timestamp: 0.00\n        </div>\n      </div>\n    </article>\n  )\n}\n\nexport default Sandbox\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}