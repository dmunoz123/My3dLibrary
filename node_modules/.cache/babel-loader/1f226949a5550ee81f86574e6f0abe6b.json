{"ast":null,"code":"var _jsxFileName = \"/home/munoz/Desktop/Spring2024/cmsi3710/final/our-own-3d-library-daniel_munoz/src/Sandbox.js\",\n  _s2 = $RefreshSig$();\n/**\n * Build out this component to display a “sandbox” scene—see the description below.\n */\nimport { useEffect, useRef, useState } from 'react';\nimport { getGL, initVertexBuffer, initIndexBuffer, initSimpleShaderProgram } from './glsl-utils';\nimport createXYGridVertices from './Geometries/XY-Grid';\nimport { cube, toRawLineArray, toRawTriangleArray } from './Geometries/Cube';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VERTEX_SHADER = `\n  #ifdef GL_ES\n  precision highp float;\n  #endif\n\n  attribute vec3 vertexPosition;\n  uniform mat4 rotationMatrix;\n  \n\n  void main(void) {\n    gl_Position = rotationMatrix * vec4(vertexPosition, 1.0);\n  }\n`;\nconst FRAGMENT_SHADER = `\n  #ifdef GL_ES\n  precision highp float;\n  #endif\n\n  uniform vec3 color;\n\n  void main(void) {\n    gl_FragColor = vec4(color, 1.0);\n  }\n`;\nconst CANVAS_WIDTH = 512;\nconst CANVAS_HEIGHT = 512;\nconst FRAMES_PER_SECOND = 30;\nconst MILLISECONDS_PER_FRAME = 1000 / FRAMES_PER_SECOND;\nconst getRotationMatrix = (angle, x, y, z) => {\n  // In production code, this function should be associated\n  // with a matrix object with associated functions.\n  const axisLength = Math.sqrt(x * x + y * y + z * z);\n  const s = Math.sin(angle * Math.PI / 180.0);\n  const c = Math.cos(angle * Math.PI / 180.0);\n  const oneMinusC = 1.0 - c;\n\n  // Normalize the axis vector of rotation.\n  x /= axisLength;\n  y /= axisLength;\n  z /= axisLength;\n\n  // Now we can calculate the other terms.\n  // \"2\" for \"squared.\"\n  const x2 = x * x;\n  const y2 = y * y;\n  const z2 = z * z;\n  const xy = x * y;\n  const yz = y * z;\n  const xz = x * z;\n  const xs = x * s;\n  const ys = y * s;\n  const zs = z * s;\n\n  // GL expects its matrices in column major order.\n  return [x2 * oneMinusC + c, xy * oneMinusC + zs, xz * oneMinusC - ys, 0.0, xy * oneMinusC - zs, y2 * oneMinusC + c, yz * oneMinusC + xs, 0.0, xz * oneMinusC + ys, yz * oneMinusC - xs, z2 * oneMinusC + c, 0.0, 0.0, 0.0, 0.0, 1.0];\n};\nconst Sandbox = props => {\n  _s2();\n  var _s = $RefreshSig$();\n  const [universe, setUniverse] = useState(null);\n  const [useWireframe, setUseWireframe] = useState(false);\n  const canvasRef = useRef();\n  const timestampRef = useRef();\n  _s(useEffect(_s(() => {\n    _s();\n    const canvas = canvasRef.current;\n    if (!canvas) {\n      return;\n    }\n    const gl = getGL(canvas);\n    if (!gl) {\n      alert('Sorry, Your browser does not support WebGL');\n    }\n    gl.enable(gl.DEPTH_TEST);\n    gl.clearColor(0.0, 0.0, 0.0, 0.0);\n    gl.viewport(0, 0, canvas.width, canvas.height);\n\n    // Shader initialization\n    let abort = false;\n    const simpleShaderProgram = initSimpleShaderProgram(gl, VERTEX_SHADER, FRAGMENT_SHADER, shader => {\n      abort = true;\n      alert('Shader loading error' + gl.getShaderInfoLog(shader));\n    }, simpleShaderProgram => {\n      abort = true;\n      alert('Could not correctly link the shader program');\n    });\n    if (abort) {\n      alert('Fatal errors encountered; we cannot continue.');\n      return;\n    }\n    gl.useProgram(simpleShaderProgram);\n    const objectsToDraw = [{\n      color: {\n        r: 0.7,\n        g: 0.7,\n        b: 0.7\n      },\n      // Assuming a grey color for the grid lines\n      vertices: createXYGridVertices(),\n      // Directly using the vertices from the grid generation function\n      mode: gl.LINES\n    }];\n    if (useWireframe) {\n      objectsToDraw.push({\n        color: {\n          r: 0.7,\n          g: 0.0,\n          b: 0.0\n        },\n        // Assuming a grey color for the grid lines\n        vertices: toRawLineArray(cube()),\n        // Directly using the vertices from the grid generation function\n        mode: gl.LINES\n      });\n    } else {\n      objectsToDraw.push({\n        color: {\n          r: 0.0,\n          g: 0.7,\n          b: 0.0\n        },\n        // Assuming a grey color for the grid lines\n        vertices: toRawTriangleArray(cube()),\n        // Directly using the vertices from the grid generation function\n        mode: gl.TRIANGLES\n      });\n    }\n    const vertexPositonAttribute = gl.getAttribLocation(simpleShaderProgram, 'vertexPosition');\n    gl.enableVertexAttribArray(vertexPositonAttribute);\n    const colorUniform = gl.getUniformLocation(simpleShaderProgram, 'color');\n\n    // ! rotation\n    const rotationMatrix = gl.getUniformLocation(simpleShaderProgram, 'rotationMatrix');\n\n    // Load buffers with vertex data\n    objectsToDraw.forEach(objectToDraw => {\n      objectToDraw.verticesBuffer = initVertexBuffer(gl, objectToDraw.vertices);\n      if (!objectToDraw.colors) {\n        // If we have a single color, we expand that into an array\n        // of the same color over and over.\n        objectToDraw.colors = [];\n        for (let i = 0, maxi = objectToDraw.vertices.length / 3; i < maxi; i += 1) {\n          objectToDraw.colors = objectToDraw.colors.concat(objectToDraw.color.r, objectToDraw.color.g, objectToDraw.color.b);\n        }\n        objectToDraw.colorsBuffer = initVertexBuffer(gl, objectToDraw.colors);\n      }\n\n      // if indices exist ...\n      if (objectToDraw.indices) {\n        objectToDraw.indexBuffer = initIndexBuffer(gl, objectToDraw.indices);\n      }\n    });\n\n    // drawing obj by vertices\n    const drawMyObject = object => {\n      gl.uniform3f(colorUniform, object.color.r, object.color.g, object.color.b);\n      gl.bindBuffer(gl.ARRAY_BUFFER, object.verticesBuffer);\n      gl.vertexAttribPointer(vertexPositonAttribute, 3, gl.FLOAT, false, 0, 0);\n      if (useWireframe || !object.indexBuffer) {\n        gl.drawArrays(object.mode, 0, object.vertices.length / 3);\n      } else {\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, object.indexBuffer);\n        gl.drawElements(object.mode, object.indices.length, gl.UNSIGNED_SHORT, 0);\n      }\n    };\n    let currentRotation = 0.0;\n    const drawScene = angle => {\n      // Clear the display.\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n      gl.uniformMatrix4fv(rotationMatrix, gl.FALSE, new Float32Array(getRotationMatrix(currentRotation, 0, 1, 0)));\n      objectsToDraw.forEach(drawMyObject);\n      gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n      // might not be needed\n      // gl.flush()\n    };\n\n    /*\n     * Animates the scene.\n     */\n    let animationActive = false;\n    let previousTimestamp = null;\n    const FRAMES_PER_SECOND = 60;\n    const MILLISECONDS_PER_FRAME = 1000 / FRAMES_PER_SECOND;\n    const DEGREES_PER_MILLISECOND = 0.033;\n    const FULL_CIRCLE = 360.0;\n    const advanceScene = timestamp => {\n      // Check if the user has turned things off.\n      if (!animationActive) {\n        return;\n      }\n\n      // Initialize the timestamp.\n      if (!previousTimestamp) {\n        previousTimestamp = timestamp;\n        window.requestAnimationFrame(advanceScene);\n        return;\n      }\n\n      // Check if it’s time to advance.\n      const progress = timestamp - previousTimestamp;\n      if (progress < MILLISECONDS_PER_FRAME) {\n        // Do nothing if it’s too soon.\n        window.requestAnimationFrame(advanceScene);\n        return;\n      }\n\n      // All clear.\n      currentRotation += DEGREES_PER_MILLISECOND * progress;\n      drawScene();\n      if (currentRotation >= FULL_CIRCLE) {\n        currentRotation -= FULL_CIRCLE;\n      }\n\n      // Request the next frame.\n      previousTimestamp = timestamp;\n      window.requestAnimationFrame(advanceScene);\n    };\n\n    // Draw the initial scene.\n    drawScene();\n    setUniverse({\n      toggleRotation: () => {\n        animationActive = !animationActive;\n        if (animationActive) {\n          previousTimestamp = null;\n          window.requestAnimationFrame(advanceScene);\n        }\n      }\n    });\n  }, \"ZdQBZ3rq7bWAAMQq6hlVCmYF0jM=\", false, function () {\n    return [gl.useProgram];\n  }), [useWireframe]), \"ZdQBZ3rq7bWAAMQq6hlVCmYF0jM=\", true);\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"The sandbox scene is where you can demonstrate features/capabilities of your library solely for the purpose of demonstrating them. It doesn\\u2019t have to fit any particular pitch or application.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setUseWireframe(!useWireframe),\n      children: useWireframe ? 'Show Filled' : 'Show Wireframe'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n        width: CANVAS_WIDTH,\n        height: CANVAS_HEIGHT,\n        ref: canvasRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: timestampRef,\n        style: {\n          position: 'absolute',\n          top: '7px',\n          left: '10px',\n          color: 'black'\n        },\n        children: \"Timestamp: 0.00\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 285,\n    columnNumber: 5\n  }, this);\n};\n_s2(Sandbox, \"GTLMerWwFEA9L7j86Hf/CtquNT8=\");\n_c = Sandbox;\nexport default Sandbox;\nvar _c;\n$RefreshReg$(_c, \"Sandbox\");","map":{"version":3,"names":["useEffect","useRef","useState","getGL","initVertexBuffer","initIndexBuffer","initSimpleShaderProgram","createXYGridVertices","cube","toRawLineArray","toRawTriangleArray","VERTEX_SHADER","FRAGMENT_SHADER","CANVAS_WIDTH","CANVAS_HEIGHT","FRAMES_PER_SECOND","MILLISECONDS_PER_FRAME","getRotationMatrix","angle","x","y","z","axisLength","Math","sqrt","s","sin","PI","c","cos","oneMinusC","x2","y2","z2","xy","yz","xz","xs","ys","zs","Sandbox","props","universe","setUniverse","useWireframe","setUseWireframe","canvasRef","timestampRef","canvas","current","gl","alert","enable","DEPTH_TEST","clearColor","viewport","width","height","abort","simpleShaderProgram","shader","getShaderInfoLog","useProgram","objectsToDraw","color","r","g","b","vertices","mode","LINES","push","TRIANGLES","vertexPositonAttribute","getAttribLocation","enableVertexAttribArray","colorUniform","getUniformLocation","rotationMatrix","forEach","objectToDraw","verticesBuffer","colors","i","maxi","length","concat","colorsBuffer","indices","indexBuffer","drawMyObject","object","uniform3f","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","FLOAT","drawArrays","ELEMENT_ARRAY_BUFFER","drawElements","UNSIGNED_SHORT","currentRotation","drawScene","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","uniformMatrix4fv","FALSE","Float32Array","animationActive","previousTimestamp","DEGREES_PER_MILLISECOND","FULL_CIRCLE","advanceScene","timestamp","window","requestAnimationFrame","progress","toggleRotation","position","top","left"],"sources":["/home/munoz/Desktop/Spring2024/cmsi3710/final/our-own-3d-library-daniel_munoz/src/Sandbox.js"],"sourcesContent":["/**\n * Build out this component to display a “sandbox” scene—see the description below.\n */\nimport { useEffect, useRef, useState } from 'react'\nimport { getGL, initVertexBuffer, initIndexBuffer, initSimpleShaderProgram } from './glsl-utils'\nimport createXYGridVertices from './Geometries/XY-Grid'\nimport { cube, toRawLineArray, toRawTriangleArray } from './Geometries/Cube'\n\nconst VERTEX_SHADER = `\n  #ifdef GL_ES\n  precision highp float;\n  #endif\n\n  attribute vec3 vertexPosition;\n  uniform mat4 rotationMatrix;\n  \n\n  void main(void) {\n    gl_Position = rotationMatrix * vec4(vertexPosition, 1.0);\n  }\n`\n\nconst FRAGMENT_SHADER = `\n  #ifdef GL_ES\n  precision highp float;\n  #endif\n\n  uniform vec3 color;\n\n  void main(void) {\n    gl_FragColor = vec4(color, 1.0);\n  }\n`\n\nconst CANVAS_WIDTH = 512\nconst CANVAS_HEIGHT = 512\n\nconst FRAMES_PER_SECOND = 30\nconst MILLISECONDS_PER_FRAME = 1000 / FRAMES_PER_SECOND\n\nconst getRotationMatrix = (angle, x, y, z) => {\n  // In production code, this function should be associated\n  // with a matrix object with associated functions.\n  const axisLength = Math.sqrt(x * x + y * y + z * z)\n  const s = Math.sin((angle * Math.PI) / 180.0)\n  const c = Math.cos((angle * Math.PI) / 180.0)\n  const oneMinusC = 1.0 - c\n\n  // Normalize the axis vector of rotation.\n  x /= axisLength\n  y /= axisLength\n  z /= axisLength\n\n  // Now we can calculate the other terms.\n  // \"2\" for \"squared.\"\n  const x2 = x * x\n  const y2 = y * y\n  const z2 = z * z\n  const xy = x * y\n  const yz = y * z\n  const xz = x * z\n  const xs = x * s\n  const ys = y * s\n  const zs = z * s\n\n  // GL expects its matrices in column major order.\n  return [\n    x2 * oneMinusC + c,\n    xy * oneMinusC + zs,\n    xz * oneMinusC - ys,\n    0.0,\n\n    xy * oneMinusC - zs,\n    y2 * oneMinusC + c,\n    yz * oneMinusC + xs,\n    0.0,\n\n    xz * oneMinusC + ys,\n    yz * oneMinusC - xs,\n    z2 * oneMinusC + c,\n    0.0,\n\n    0.0,\n    0.0,\n    0.0,\n    1.0\n  ]\n}\n\nconst Sandbox = props => {\n  const [universe, setUniverse] = useState(null)\n  const [useWireframe, setUseWireframe] = useState(false)\n  const canvasRef = useRef()\n  const timestampRef = useRef()\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    if (!canvas) {\n      return\n    }\n\n    const gl = getGL(canvas)\n\n    if (!gl) {\n      alert('Sorry, Your browser does not support WebGL')\n    }\n\n    gl.enable(gl.DEPTH_TEST)\n    gl.clearColor(0.0, 0.0, 0.0, 0.0)\n    gl.viewport(0, 0, canvas.width, canvas.height)\n\n    // Shader initialization\n    let abort = false\n    const simpleShaderProgram = initSimpleShaderProgram(\n      gl,\n      VERTEX_SHADER,\n      FRAGMENT_SHADER,\n\n      shader => {\n        abort = true\n        alert('Shader loading error' + gl.getShaderInfoLog(shader))\n      },\n\n      simpleShaderProgram => {\n        abort = true\n        alert('Could not correctly link the shader program')\n      }\n    )\n\n    if (abort) {\n      alert('Fatal errors encountered; we cannot continue.')\n      return\n    }\n\n    gl.useProgram(simpleShaderProgram)\n\n    const objectsToDraw = [\n      {\n        color: { r: 0.7, g: 0.7, b: 0.7 }, // Assuming a grey color for the grid lines\n        vertices: createXYGridVertices(), // Directly using the vertices from the grid generation function\n        mode: gl.LINES\n      }\n    ]\n\n    if (useWireframe) {\n      objectsToDraw.push({\n        color: { r: 0.7, g: 0.0, b: 0.0 }, // Assuming a grey color for the grid lines\n        vertices: toRawLineArray(cube()), // Directly using the vertices from the grid generation function\n        mode: gl.LINES\n      })\n    } else {\n      objectsToDraw.push({\n        color: { r: 0.0, g: 0.7, b: 0.0 }, // Assuming a grey color for the grid lines\n        vertices: toRawTriangleArray(cube()), // Directly using the vertices from the grid generation function\n        mode: gl.TRIANGLES\n      })\n    }\n\n    const vertexPositonAttribute = gl.getAttribLocation(simpleShaderProgram, 'vertexPosition')\n    gl.enableVertexAttribArray(vertexPositonAttribute)\n    const colorUniform = gl.getUniformLocation(simpleShaderProgram, 'color')\n\n    // ! rotation\n    const rotationMatrix = gl.getUniformLocation(simpleShaderProgram, 'rotationMatrix')\n\n    // Load buffers with vertex data\n    objectsToDraw.forEach(objectToDraw => {\n      objectToDraw.verticesBuffer = initVertexBuffer(gl, objectToDraw.vertices)\n\n      if (!objectToDraw.colors) {\n        // If we have a single color, we expand that into an array\n        // of the same color over and over.\n        objectToDraw.colors = []\n        for (let i = 0, maxi = objectToDraw.vertices.length / 3; i < maxi; i += 1) {\n          objectToDraw.colors = objectToDraw.colors.concat(\n            objectToDraw.color.r,\n            objectToDraw.color.g,\n            objectToDraw.color.b\n          )\n        }\n\n        objectToDraw.colorsBuffer = initVertexBuffer(gl, objectToDraw.colors)\n      }\n\n      // if indices exist ...\n      if (objectToDraw.indices) {\n        objectToDraw.indexBuffer = initIndexBuffer(gl, objectToDraw.indices)\n      }\n    })\n\n    // drawing obj by vertices\n    const drawMyObject = object => {\n      gl.uniform3f(colorUniform, object.color.r, object.color.g, object.color.b)\n      gl.bindBuffer(gl.ARRAY_BUFFER, object.verticesBuffer)\n      gl.vertexAttribPointer(vertexPositonAttribute, 3, gl.FLOAT, false, 0, 0)\n\n      if (useWireframe || !object.indexBuffer) {\n        gl.drawArrays(object.mode, 0, object.vertices.length / 3)\n      } else {\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, object.indexBuffer)\n        gl.drawElements(object.mode, object.indices.length, gl.UNSIGNED_SHORT, 0)\n      }\n    }\n\n    let currentRotation = 0.0\n\n    const drawScene = angle => {\n      // Clear the display.\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT)\n\n      gl.uniformMatrix4fv(rotationMatrix, gl.FALSE, new Float32Array(getRotationMatrix(currentRotation, 0, 1, 0)))\n\n      objectsToDraw.forEach(drawMyObject)\n\n      gl.bindBuffer(gl.ARRAY_BUFFER, null)\n\n      // might not be needed\n      // gl.flush()\n    }\n\n    /*\n     * Animates the scene.\n     */\n    let animationActive = false\n    let previousTimestamp = null\n\n    const FRAMES_PER_SECOND = 60\n    const MILLISECONDS_PER_FRAME = 1000 / FRAMES_PER_SECOND\n\n    const DEGREES_PER_MILLISECOND = 0.033\n    const FULL_CIRCLE = 360.0\n\n    const advanceScene = timestamp => {\n      // Check if the user has turned things off.\n      if (!animationActive) {\n        return\n      }\n\n      // Initialize the timestamp.\n      if (!previousTimestamp) {\n        previousTimestamp = timestamp\n        window.requestAnimationFrame(advanceScene)\n        return\n      }\n\n      // Check if it’s time to advance.\n      const progress = timestamp - previousTimestamp\n      if (progress < MILLISECONDS_PER_FRAME) {\n        // Do nothing if it’s too soon.\n        window.requestAnimationFrame(advanceScene)\n        return\n      }\n\n      // All clear.\n      currentRotation += DEGREES_PER_MILLISECOND * progress\n      drawScene()\n\n      if (currentRotation >= FULL_CIRCLE) {\n        currentRotation -= FULL_CIRCLE\n      }\n\n      // Request the next frame.\n      previousTimestamp = timestamp\n      window.requestAnimationFrame(advanceScene)\n    }\n\n    // Draw the initial scene.\n    drawScene()\n\n    setUniverse({\n      toggleRotation: () => {\n        animationActive = !animationActive\n        if (animationActive) {\n          previousTimestamp = null\n          window.requestAnimationFrame(advanceScene)\n        }\n      }\n    })\n  }, [useWireframe])\n\n  \n\n\n  return (\n    <article>\n      <p>\n        The sandbox scene is where you can demonstrate features/capabilities of your library solely for the purpose of\n        demonstrating them. It doesn’t have to fit any particular pitch or application.\n      </p>\n\n      <button onClick={() => setUseWireframe(!useWireframe)}>{useWireframe ? 'Show Filled' : 'Show Wireframe'}</button>\n\n      <div style={{ position: 'relative' }}>\n        <canvas width={CANVAS_WIDTH} height={CANVAS_HEIGHT} ref={canvasRef} />\n        <div ref={timestampRef} style={{ position: 'absolute', top: '7px', left: '10px', color: 'black' }}>\n          Timestamp: 0.00\n        </div>\n      </div>\n    </article>\n  )\n}\n\nexport default Sandbox\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}