{"ast":null,"code":"import Matrix from './Matrix/Matrix';\n\n// provides similar user interface as threejs to not make user manipulate matrix directly for each transformation, instead they .rotate!\nclass Transformable {\n  constructor() {\n    this.position = {\n      x: 0,\n      y: 0,\n      z: 0\n    };\n    this.rotation = {\n      x: 0,\n      y: 0,\n      z: 0\n    };\n    this.scale = {\n      x: 1,\n      y: 1,\n      z: 1\n    };\n    this.matrix = new Matrix();\n    this.needsUpdate = true;\n  }\n  updateMatrixLazy() {\n    if (!this.needsUpdate) {\n      return;\n    }\n    this.matrix.reset();\n    this.matrix = Matrix.translation(this.position.x, this.position.y, this.position.z).multiply(Matrix.rotate(this.rotation.x, 1, 0, 0)).multiply(Matrix.rotate(this.rotation.y, 0, 1, 0)).multiply(Matrix.rotate(this.rotation.z, 0, 0, 1)).multiply(Matrix.scale(this.scale.x, this.scale.y, this.scale.z));\n    this.needsUpdate = false;\n  }\n  setPosition(x, y, z) {\n    this.position = {\n      x,\n      y,\n      z\n    };\n    this.needsUpdate = true;\n  }\n  setRotation(x, y, z) {\n    this.rotation = {\n      x,\n      y,\n      z\n    };\n    this.needsUpdate = true;\n  }\n  setScale(x, y, z) {\n    this.scale = {\n      x,\n      y,\n      z\n    };\n    this.needsUpdate = true;\n  }\n  setMatrix(matrix) {\n    this.matrix = matrix;\n    this.needsUpdate = false;\n  }\n}\nclass Group extends Transformable {\n  constructor() {\n    super();\n    this.children = [];\n  }\n  add(child) {\n    if (this.children.includes(child)) {\n      console.warn('Child already added');\n      return;\n    }\n    this.children.push(child);\n  }\n  remove(child) {\n    const index = this.children.indexOf(child);\n    if (index !== -1) {\n      this.children.splice(index, 1);\n    }\n  }\n  traverse(callback) {\n    let parentMatrix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Matrix();\n    this.updateMatrixLazy();\n    const worldMatrix = parentMatrix.multiply(this.matrix);\n    callback(this, worldMatrix);\n    this.children.forEach(child => {\n      if (child instanceof Group) {\n        child.traverse(callback, worldMatrix);\n      } else {\n        callback(child, worldMatrix);\n      }\n    });\n  }\n}\nexport { Transformable, Group };","map":{"version":3,"names":["Matrix","Transformable","constructor","position","x","y","z","rotation","scale","matrix","needsUpdate","updateMatrixLazy","reset","translation","multiply","rotate","setPosition","setRotation","setScale","setMatrix","Group","children","add","child","includes","console","warn","push","remove","index","indexOf","splice","traverse","callback","parentMatrix","worldMatrix","forEach"],"sources":["/home/munoz/Desktop/Spring2024/cmsi3710/final/our-own-3d-library-daniel_munoz/src/Group.js"],"sourcesContent":["import Matrix from './Matrix/Matrix'\n\n// provides similar user interface as threejs to not make user manipulate matrix directly for each transformation, instead they .rotate!\nclass Transformable {\n  constructor() {\n    this.position = { x: 0, y: 0, z: 0 }\n    this.rotation = { x: 0, y: 0, z: 0 }\n    this.scale = { x: 1, y: 1, z: 1 }\n    this.matrix = new Matrix()\n    this.needsUpdate = true\n  }\n\n  updateMatrixLazy() {\n    if (!this.needsUpdate) {\n      return\n    }\n    this.matrix.reset()\n    this.matrix = Matrix.translation(this.position.x, this.position.y, this.position.z)\n      .multiply(Matrix.rotate(this.rotation.x, 1, 0, 0))\n      .multiply(Matrix.rotate(this.rotation.y, 0, 1, 0))\n      .multiply(Matrix.rotate(this.rotation.z, 0, 0, 1))\n      .multiply(Matrix.scale(this.scale.x, this.scale.y, this.scale.z))\n    this.needsUpdate = false\n  }\n\n  \n  setPosition(x, y, z) {\n    this.position = { x, y, z }\n    this.needsUpdate = true\n  }\n\n  setRotation(x, y, z) {\n    this.rotation = { x, y, z }\n    this.needsUpdate = true\n  }\n\n  setScale(x, y, z) {\n    this.scale = { x, y, z }\n    this.needsUpdate = true\n  }\n\n  setMatrix(matrix) {\n    this.matrix = matrix\n    this.needsUpdate = false\n  }\n}\n\nclass Group extends Transformable {\n  constructor() {\n    super()\n    this.children = []\n  }\n\n  add(child) {\n    if (this.children.includes(child)) {\n      console.warn('Child already added')\n      return\n    }\n    this.children.push(child)\n  }\n\n  remove(child) {\n    const index = this.children.indexOf(child)\n    if (index !== -1) {\n      this.children.splice(index, 1)\n    }\n  }\n\n  traverse(callback, parentMatrix = new Matrix()) {\n    this.updateMatrixLazy()\n    const worldMatrix = parentMatrix.multiply(this.matrix)\n\n    callback(this, worldMatrix)\n\n    this.children.forEach(child => {\n      if (child instanceof Group) {\n        child.traverse(callback, worldMatrix)\n      } else {\n        callback(child, worldMatrix)\n      }\n    })\n  }\n}\n\nexport { Transformable, Group }\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}